<!DOCTYPE html>
<html lang="ja" ng-app="myApp">
<head>
    <meta charset="UTF-8">
    <title>Todoアプリ</title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular.min.js"></script>
</head>
<body ng-controller="appController as vm">
    <style>
        .done {
            text-decoration: line-through;
            color: red;
        }
    </style>
    <script>
        angular.module('myApp', [])
            .component('todo', {
                controllerAs: 'vm',
                controller: function() {
                    var vm = this;

                    vm.todos = [];
                    vm.todoTitle = '';

                    /**
                     * TODO項目の作成処理
                     */
                    vm.todoCreate = function() {
                        var item = {
                            title: vm.todoTitle,
                            done: false
                        };
                        vm.todos.push(item);

                        vm.todoTitle = '';
                    };

                    /**
                     * 削除処理
                     */
                    vm.todoDelete = function() {
                        var newTodos = [];
                        angular.forEach(vm.todos, function(item){
                            if (!item.done) {
                                newTodos.push(item);
                            }
                        })
                        vm.todos = newTodos;
                    }
                },
                templateUrl: 'todo.html'
            });
    </script>
    <todo></todo>
</body>
</html>